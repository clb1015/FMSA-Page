<!DOCTYPE html>
<html>
<head>
    <title>Florida County Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map {
            height: 600px;
            width: 100%;
            margin: 0 auto;
        }
        .county-tooltip {
            background-color: #fff;
            padding: 5px;
            border: 1px solid #000;
            border-radius: 5px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Florida County Map</h1>
    <p>Hover over a county to see its supervisor and email. Click a county to visit its school district website.</p>
    <div id="map"></div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
let counties = {};

// Fetch and parse the CSV file
Papa.parse('supervisors.csv', {
    download: true,
    header: true, // Treat the first row as headers
    complete: function(results) {
        results.data.forEach(row => {
            counties[row.County] = {
                supervisor: row.Supervisor,
                email: row.Email,
                website: row.Website
            };
        });
        initializeMap(); // Call the map initialization after data is loaded
    }
});

// Initialize the map after loading CSV data
function initializeMap() {
    var map = L.map('map').setView([27.9944024, -81.7602544], 7);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
    }).addTo(map);

    fetch('path-to-your-geojson-file.geojson')
        .then(response => response.json())
        .then(data => {
            L.geoJSON(data, {
                style: {
                    color: '#000',
                    weight: 1,
                    fillColor: '#ccc',
                    fillOpacity: 0.5
                },
                onEachFeature: function(feature, layer) {
                    const countyName = feature.properties.NAME;
                    const countyInfo = counties[countyName];

                    if (countyInfo) {
                        const tooltipContent = `
                            <strong>${countyName}</strong><br>
                            Supervisor: ${countyInfo.supervisor || 'TBD'}<br>
                            Email: ${countyInfo.email || 'Not available'}
                        `;

                        layer.bindTooltip(tooltipContent, {
                            className: 'county-tooltip',
                            sticky: true
                        });

                        layer.on('mouseover', function() {
                            this.setStyle({ fillColor: '#6c757d', fillOpacity: 0.7 });
                            updateHoverBox(countyName, countyInfo);
                        });

                        layer.on('mouseout', function() {
                            this.setStyle({ fillColor: '#ccc', fillOpacity: 0.5 });
                            clearHoverBox();
                        });

                        layer.on('click', function() {
                            window.open(countyInfo.website, '_blank');
                        });
                    }
                }
            }).addTo(map);
        })
        .catch(err => console.error('Error loading GeoJSON:', err));
}

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Initialize the map
        var map = L.map('map').setView([27.9944024, -81.7602544], 7); // Centered on Florida

        // Add a tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
        }).addTo(map);

       
         // Fetch GeoJSON data for Florida counties
        fetch('Florida_County_Boundaries_with_FDOT_Districts_6074369993038631266.geojson') // Replace with actual GeoJSON file path
            .then(response => response.json())
            .then(data => {
                L.geoJSON(data, {
                    style: {
                        color: '#000',
                        weight: 1,
                        fillColor: '#ccc',
                        fillOpacity: 0.5
                    },
                 onEachFeature: function(feature, layer) {
    const countyName = feature.properties.NAME;
    const countyInfo = counties[countyName];

    if (countyInfo) {
        // Create tooltip content with placeholders for supervisor data
        const tooltipContent = `
    <strong>${countyName}</strong><br>
    Supervisor: ${countyInfo.supervisor || 'TBD'}<br>
    Email: ${countyInfo.email || 'Not available'}
`;

        layer.bindTooltip(tooltipContent, {
            className: 'county-tooltip',
            sticky: true
        });

        // Style changes on hover
        layer.on('mouseover', function() {
            this.setStyle({ fillColor: '#6c757d', fillOpacity: 0.7 });
        });

        layer.on('mouseout', function() {
            this.setStyle({ fillColor: '#ccc', fillOpacity: 0.5 });
        });

        // Open school district website on click
        layer.on('click', function() {
            window.open(countyInfo.website, '_blank');
        });
    }
}

                }).addTo(map);
            })
            .catch(err => console.error(err));
    </script>
</body>
</html>

